(()=>{function p(o,s){let l=(s.includes("global")?[...document.styleSheets]:[...document.styleSheets].filter(({title:t})=>s.includes(t))).filter(({href:t})=>t?t?.includes(window.location.host):!0).flatMap(({cssRules:t})=>[...t]),r=new CSSStyleSheet;for(let t of[...l].reverse())t instanceof CSSStyleRule&&t.selectorText===":root"||r.insertRule(t.cssText);o.adoptedStyleSheets=[r]}function h(o){(function s(e){if(e>=o.length)return;let i=o[e],n=document.createElement("script");for(let{name:l,value:r}of Array.from(i.attributes))n.setAttribute(l,r);i.src?(n.async=!1,n.onload=()=>s(e+1),document.head.appendChild(n)):(n.textContent=i.textContent,document.head.appendChild(n),s(e+1))})(0)}async function f(o,s,e){let i=document.getElementById(s),n=Array.from(i.content.querySelectorAll("script"));h(n);let r=new DOMParser().parseFromString(i.innerHTML,"text/html").body.firstChild;e.appendChild(r),o.initTree(e)}async function S(o,s,e){let n=await(await fetch(s)).text(),r=new DOMParser().parseFromString(n,"text/html"),t=Array.from(r.querySelectorAll("script"));t.forEach(a=>a.remove()),h(t);let c=r.body.firstChild;e.appendChild(c),o.initTree(e)}function w(o){class s extends HTMLElement{connectedCallback(){if(this._hasInit)return;let n=window.xComponent?.useShadow??!1;this.hasAttribute("use-shadow")&&(n=this.getAttribute("use-shadow")==="true");let l=n?this.attachShadow({mode:"open"}):this,r=this.hasAttribute(":template"),t=this.hasAttribute(":url");(r||t)&&o.initTree(this);let{template:c,url:a,styles:y}=this.attributes||{},m=c?.value||"",u=a?.value||"",d=y?.value.split(",")||"";m.length&&f(o,m,l),u.length&&S(o,(window.xComponent?.urlPrefix||"")+u,l),d.length&&p(l,d),this._hasInit=!0}}let{name:e}=window?.xComponent||{name:"x-component"};window.customElements.get(e)||(customElements.define(e,s),new s)}document.addEventListener("alpine:init",()=>window.Alpine.plugin(w));})();
