function h(o,s){let l=(s.includes("global")?[...document.styleSheets]:[...document.styleSheets].filter(({title:t})=>s.includes(t))).filter(({href:t})=>t?t?.includes(window.location.host):!0).flatMap(({cssRules:t})=>[...t]),r=new CSSStyleSheet;for(let t of[...l].reverse())t instanceof CSSStyleRule&&t.selectorText===":root"||r.insertRule(t.cssText);o.adoptedStyleSheets=[r]}function p(o){(function s(n){if(n>=o.length)return;let i=o[n],e=document.createElement("script");for(let{name:l,value:r}of Array.from(i.attributes))e.setAttribute(l,r);i.src?(e.async=!1,e.onload=()=>s(n+1),document.head.appendChild(e)):(e.textContent=i.textContent,document.head.appendChild(e),s(n+1))})(0)}async function f(o,s,n){let i=document.getElementById(s),e=Array.from(i.content.querySelectorAll("script"));e.forEach(t=>t.remove());let r=new DOMParser().parseFromString(i.innerHTML,"text/html").body.firstChild;n.appendChild(r),o.initTree(n),p(e)}async function S(o,s,n){let e=await(await fetch(s)).text(),r=new DOMParser().parseFromString(e,"text/html"),t=Array.from(r.querySelectorAll("script"));t.forEach(a=>a.remove());let c=r.body.firstChild;n.appendChild(c),o.initTree(n),p(t)}function y(o){class s extends HTMLElement{connectedCallback(){if(this._hasInit)return;let e=window.xComponent?.useShadow??!1;this.hasAttribute("use-shadow")&&(e=this.getAttribute("use-shadow")==="true");let l=e?this.attachShadow({mode:"open"}):this,r=this.hasAttribute(":template"),t=this.hasAttribute(":url");(r||t)&&o.initTree(this);let{template:c,url:a,styles:w}=this.attributes||{},m=c?.value||"",u=a?.value||"",d=w?.value.split(",")||"";m.length&&f(o,m,l),u.length&&S(o,(window.xComponent?.urlPrefix||"")+u,l),d.length&&h(l,d),this._hasInit=!0}}let{name:n}=window?.xComponent||{name:"x-component"};window.customElements.get(n)||(customElements.define(n,s),new s)}var v=y;export{v as default};
